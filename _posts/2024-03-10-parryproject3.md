---
title:  "[ParryProject] 보스 패턴 구현"
date:   2024-03-10
categories: [ParryProject]
tag: [unity, game, study, 유니티, 게임, 게임개발]
image:
  path: /assets/img/20240310/KakaoTalk_20240310_190130852.jpg
  alt: 뭔가 보여드리겠습니다
---

## **무엇을 했는가**
---

몬스터의 패턴을 구현하였다

### **구상**

![몬스터 패턴 설계](/assets/img/20240310/KakaoTalk_20240310_190616034.jpg)

유튜브 슈팅게임 강의에서 본 기억을 바탕으로 위와 같이 보스의 패턴 사이클을 구상하였다.

`Think` 함수에서 현재 인덱스에 따라 해당 패턴 함수/코루틴을 실행한다.

각 패턴 함수/코루틴을 실행한 후 `EndPattern`함수에서 행동 종료 작업과 인덱스 증가를 수행한다.

패턴 사용 도중에 보스가 사망한다면 코루틴의 경우 사망 로직과 동시에 돌아갈 가능성이 있으니, 현재 패턴 코루틴을 저장할 `Coroutine` 변수를 만들고 사망시 `StopCoroutine` 함수로 패턴을 멈추는 방안을 고려했다.

### **구현**

총 세 가지 패턴을 구상했다.

1. 일반 투사체 발사
2. 고속 투사체 발사
3. 유탄형 투사체 발사

![일반 투사체](/assets/img/20240310/240309_1.gif)

일반 투사체 - 플레이어 방향으로 여러 발의 투사체를 발사

![고속 투사체](/assets/img/20240310/240309_2.gif)

고속  투사체 - 잠깐의 딜레이 후 플레이어 방향으로 빠르게 투사체를 발사

![유탄형 투사체](/assets/img/20240310/240309_3.gif)

유탄형 투사체 - 플레이어의 위치로 포물선을 그리며 나아가는 유탄을 발사

투사체가 포물선으로 날아가는 로직은 [해당 포럼 글](https://forum.unity.com/threads/2d-arrow-shooting-to-a-moving-target.426665/)과 여기 링크된 글들을 참고해 코드를 작성, 수정하였다.
원본 코드대로는 X축의 속도가 일정해 가까울수록 빠르게 날아가는 것처럼 보이는 것이 문제였기에, 일정 시간 후에 목표에 도착하도록 수정하였다.

기본적인 패턴의 실행은 함수/코루틴으로 시작하고, 해당 로직 내에서 애니메이션 파라미터, 이벤트를 통해 세세한 액션 - 투사체 발사, 패턴 종료 판별 등을 실행하였다.

## **무엇을 할 것인가**
---

이후 계획은 기존과 비슷하게 간다.

- UI, 메인메뉴 간단하게 구현
- 이전에 시청한 유튜브 강의들 재시청 및 새로 저장해 둔 영상들 시청
  - 기술, 개념들 정리
- 기존 코드 리펙토링

위에 간단히 서술한 순서로 진행한 후 본격적으로 구체적인 기획을 할 예정.

## **여담**
---

솔직히 고민 많이 했다. 이런 식으로 만든다고 원하는대로 결과물이 나와줄까. 그럼에도 좌절하지 않고 끝까지 해낼 수 있을까.

그래도 끝까지 해 봐야지. 내가 해 보고 싶었던 거였으니.

게임성으로든, 그 외의 요소로든 혹평을 받아도 좋다. 내가 만들고 싶었던 걸 만드는 거니까. 배워가면서 하고 싶은 걸 할 수 있는것도 지금 아니면 못 할지도 모르니까. 미련을 갖고 후회하고 싶지는 않으니까.

그래도 게임성 쪽으로는 고민을 계속 해 봐야겠지. 그걸로 요즘 골머리만 썩히고 있다.
